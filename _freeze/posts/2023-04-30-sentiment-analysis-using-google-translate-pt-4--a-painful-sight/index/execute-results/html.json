{
  "hash": "bbc49483278325afc841794e0c85137e",
  "result": {
    "markdown": "---\ntitle: \"Sentiment Analysis Using Google Translate (Pt. 4 - A Painful Sight)\"\nauthor: Art Steinmetz\ndate: 2023-04-30\ndraft: false\ncategories: \n  - twitter\n  - tidytext\nformat: html\neditor: visual\nimage: img/preview.png\nbibliography: references.bib\nexecute: \n  eval: true\n  freeze: true\n  warning: false\n---\n\n\n## Introduction\n\nMany of us in the U.S. have been surprised by the indifference many in less developed countries have shown about the Ukraine war. There has been much talk lately about how the \"Global South\" is feeling slighted by the rich countries in the northern hemisphere. The [Afrisenti data set](https://arxiv.org/abs/2302.08956) [@Muhammad2023] is a collection of over 110,000 tweets from Africa. Its purpose is to train language sentiment models but maybe it can give us some insight into how Africans view different regions of the \"Global North.\"\n\nFor the final bite of the apple in this series, we'll look at the translated tweets and tally the sentiment expressed in each tweet mentioning the U.S., Russia, China and/or Europe. What is the balance of sentiment expressed in this data set about each of these regions?\n\nThere are some major caveats with this social science experiment. First, while we are using the sentiments coded by native language-speaking curators, there is no stipulation that the sentiment toward a region and the sentiment of the tweet are the same. \"I hate enemies of Russia\" is a negative tweet, although positive toward Russia. Second, the sample size, while large overall, contains merely hundreds of tweets mentioning our regions of interest. We can't claim this is representative. Finally, we don't know the dates of the tweets. We know by some of the news events they reference they probably span the period from 2012 to sometime in 2022. The start of the Ukraine war at the beginning of 2022 and other World events may have shifted attitudes but we can't split up the tweets by time.\n\nUnlike our previous posts in this series, this one will be mercifully short.\n\n## Setup\n\nWe start by loading the packages and the file with the already translated tweets.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressPackageStartupMessages({\n  library(tidyverse)\n  library(tidytext)\n})\n\n# set up some chart defaults\ntan1 <- \"#FDECCD\"\nyellow1 <- \"#FFBF00\"\ngreen1 <- \"#007000\"\n\ntheme_afri <- function(...){\n  # making a function allows passing further theme elements\n  ggplot2::theme(\n    plot.background = element_rect(fill = tan1, color = NA),\n    panel.background = element_blank(),\n    legend.background = element_blank(),\n    legend.box.background = element_blank(),\n    legend.key = element_blank(),\n    ...\n    ) \n}\n\n# the the previously translated tweets.\nafrisenti_translated <-\n  readr::read_csv(\n    'https://raw.githubusercontent.com/apsteinmetz/tidytuesday/master/2023-02-28_african_language/data/afrisenti_translated.csv',\n    show_col_types = FALSE\n  ) |>\n  mutate(lang = as.factor(assigned_long)) |>\n  mutate(sentiment = as.factor(label)) |>\n  mutate(intended_use = as.factor(intended_use)) |>\n  select(lang, tweet_num, sentiment, translatedText)\n```\n:::\n\n\n## Data Wrangling\n\nWe'll do some light data wranglng to bring some consistency to how areas are referred to. China and Russia are easy to spot. What does \"us\" mean? We capture a few variants but there will be some false positives and negatives, I suspect.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nafrisenti_translated <- afrisenti_translated |>\n  # can we separate \"US\" from \"us\"?\n  # What about when the tweet is in ALL CAPS BECAUSE I LIKE TO SHOUT?\n  mutate(text = translatedText) |>\n  mutate(text = str_replace(text, \"[a-z]+ US \", \" united_states \")) |>\n  mutate(text = str_replace(text, \"THE US\", \"THE united_states\")) |>\n  mutate(text = str_replace(text, \"U\\\\.S\\\\.A\\\\.\", \" united_states \")) |>\n  mutate(text = str_replace(text, \"U\\\\.S\\\\.\", \" united_states \")) |>\n  mutate(text = str_replace(text, \" USA \", \" united_states \")) |>\n  mutate(text = str_replace(text, \"^USA \", \" united_states \")) |>\n  mutate(text = str_replace(text, \"^US \", \" united_states \")) |>\n  mutate(text = tolower(text)) |>\n  # it's all lower case from here\n  mutate(text = str_replace(text, \"united states\", \"united_states \")) |>\n  # don't label \"south america\" as \"south usa\"\n  mutate(text = str_replace(text, \"south america\", \"south_america\")) |>\n  mutate(text = str_replace(text, \" america\", \" united_states \"))  |> \n  mutate(text = str_replace(text, \"^america\", \"united_states \"))  |> \n  # \"American\" \"European\" and \"Russian\" are stemmed to area name, not so Chinese\n  mutate(text = str_replace(text, \"chinese\", \"china\"))  |> \n  mutate(text = str_replace(text, \" eu \", \" europe \"))\n```\n:::\n\n\nLet's look at a few random tweets mentioning our areas of interest. We can compare `text` to the unaltered `translatedText` to see how well our wrangling worked.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nafrisenti_translated |> \n  select(sentiment,text,translatedText) |> \n  filter(str_detect(text,\"china|russia|united_states|europe\")) |> \n  slice_sample(n=10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 3\n   sentiment text                                                 translatedText\n   <fct>     <chr>                                                <chr>         \n 1 negative  in addition to this, it is necessary to stop the re… In addition t…\n 2 negative  don't touch united_states , jokes and conspiracy wi… Don't touch A…\n 3 negative  intimidating the people is a policy practiced by ri… Intimidating …\n 4 neutral   russian foreign minister: kane is making positive p… Russian Forei…\n 5 neutral   a disappointing blow to the far-right candidate, co… A disappointi…\n 6 neutral   dr. bashiru will discuss four issues with  united_s… Dr. Bashiru w…\n 7 negative  the grandchildren of the generation that followed e… The grandchil…\n 8 neutral   a senior delegation led by ethiopia's minister of n… A senior dele…\n 9 positive  wow your shoes are nice responses united_states ns … wow your shoe…\n10 positive  in the marathon held in china, ethiopian athletes w… In the marath…\n```\n:::\n:::\n\n\n## Split the Tweets into Words and Tally Results\n\nAs sort of a control, let's include \"Africa\" as one of our areas.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nareas <- c(\"united_states\",\"europe\",\"russia\",\"china\",\"africa\")\ntokens <- afrisenti_translated %>%  \n  unnest_tokens(Area, text ) %>% \n  count(Area,sentiment, sort = TRUE) |>\n  filter(Area %in% areas) |> \n  # cosmetic plot improvements\n  mutate(Area = str_to_title(Area)) |> \n  mutate(Area = str_replace(Area,\"United_states\",\"USA\"))\n```\n:::\n\n\n## Results: The Higher Up the Tree the Monkey Climbs, the More Its Ass Shows\n\nSadly, among tweets mentioning the Global North, there are more tagged with negative than positive sentiment. In contrast, the balance of sentiment is positive in tweets mentioning \"Africa\" (as opposed to particular African countries). It's perhaps not surprising the the United States is the most mentioned area. It aslo has the worst balance of sentiment. Alone among the areas, Russia has more neutral sentiment tweets than any other sentiment.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncol_set <-   c(\"#952038\",\"#F7C608\",\"#319400\")\n  \n# feelings about world powers\ntokens |>\n  ggplot(aes(Area,n,fill = sentiment)) + \n  geom_col(position = \"dodge\") + \n  scale_fill_manual(values =  col_set) + \n  labs(title = 'Q:How Does Africa Feel About the Global North?\\nA: Not great, but Tweets mentioning Russia are mostly \"neutral.\"',\n       subtitle = \"WARNING: Sample size is not large. Other caveats apply.\",\n       y = \"Tweet Count\",\n       caption = \"Source: Afrisenti data set\") +\n  coord_flip() +\n  annotate(\"text\",x = 2.5,y = 100,label = \"Alternate names for\\nareas are combined.\\ne.g. EU = Europe\") +\n  theme_afri(plot.subtitle = element_text(face = \"italic\"))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nWe can calculate a net sentiment ratio as the positive minus negative divided by the sum of all tweets. This shows in stark terms how the balance of sentiment is worse for the United States than the other regions we are looking at. Further, both while both Russia and China are viewed negatively, on balance, they are viewed less poorly than both the USA and Europe.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntokens |> \n  pivot_wider(names_from = \"sentiment\",values_from = \"n\") |> \n  mutate(net_sentiment_ratio = (positive - negative)/(positive+negative+neutral)) |> \n  ggplot(aes(Area,net_sentiment_ratio)) + geom_col(fill = yellow1) + \n  geom_hline(yintercept = 0) + \n  theme_afri() + \n  labs(y = \"Net Sentiment Ratio\",\n       title = \"Not A Good Look For the USA\",\n       subtitle = \"Net Sentiment of Tweets from Africa Mentioning a Northern Area or Africa\",\n       caption = \"Source: Afrisenti Data Set\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Conclusion\n\nWhile I think these results are truly interesting, please don't read too much into them. This is not a carefully designed social science research project. The results do align with our intuition gleaned from recent news about the \"Global South\" vs. the \"Global North.\" Given that this data set spans roughly ten years, this tension is not a new phenomenon.\n\nThe Afrisenti data set is a fascinating corpus and there are many more explorations we might do in it. As I write, it looks like Twitter is going to put its academic API behind a paywall. This is quite sad and will stifle the kind of important explorations serious researchers are able to do, not to mention curious amateurs like us.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}